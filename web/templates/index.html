<!doctype html><html lang="ja"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MCP News – Minimal UI</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:24px}
h1{margin:0 0 12px} .toolbar{display:flex;gap:8px;margin:12px 0}
.card{border:1px solid #ddd;border-radius:10px;padding:12px;margin:8px 0}
.meta{font-size:12px;color:#555}
input,button{padding:8px;border:1px solid #ccc;border-radius:8px}
button{cursor:pointer}
</style>
<h1>MCP News – Latest</h1>
<div class="toolbar">
  <input id="q" placeholder="タイトルに含まれる語で検索（任意）">
  <button onclick="runSearch()">検索</button>
  <button onclick="loadLatest()">最新を表示</button>
</div>
<div id="list"></div>
<script>
async function render(items){
  const root=document.getElementById('list'); root.innerHTML='';
  if(!items.length){ root.innerHTML='<p>該当なし。</p>'; return; }
  for(const it of items){
    const div=document.createElement('div'); div.className='card';
    div.innerHTML = `
      <div><a href="${it.url}" target="_blank" rel="noopener">${escapeHtml(it.title)}</a></div>
      <div class="meta">${it.published_at} ｜ ${escapeHtml(it.source || '')} ｜ ${escapeHtml(it.genre_hint || '')}</div>`;
    root.appendChild(div);
  }
}
function escapeHtml(s){return s? s.replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;' }[m])):''}
async function loadLatest(){ const r=await fetch('/api/latest?limit=50'); render(await r.json()); }
async function runSearch(){
  const q=document.getElementById('q').value.trim();
  if(!q){ return loadLatest(); }
  const r=await fetch('/api/search?'+new URLSearchParams({q,limit:50}));
  render(await r.json());
}
loadLatest();
</script>
</html>