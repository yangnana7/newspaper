# 作業ログ 2025-08-27

## 実施概要
- A) エンティティ外部リンクと重複対策（スケルトン）
  - 追加: `db/migrations/2025-08-27_entity_name_unique.sql`（nameユニークインデックス）
  - 追加: `scripts/link_entities_wikidata.py`（QID連携・関数 `link_missing()`）
  - 改修: `scripts/ingest_entities.py`（重複回避・再利用）
  - テスト: `tests/test_entity_linking.py`（モンキーパッチで外部呼び出しを模擬）
- B) イベント抽出詳細化（初期）
  - 改修: `scripts/event_extract.py`（参加者抽出・簡易位置付与）
  - 改修: `scripts/ingest_events.py`（参加者登録）
  - テスト: `tests/test_event_extraction.py`（基本挙動）
- C) event_timeline API 拡張
  - 改修: `mcp_news/server.py`（participants/doc_ids を含めて返却）
- D) 言語判定に向けた準備
  - 追記: `requirements-dev.txt`（`langdetect`, `requests`）
- E) ドキュメント
  - 追加: `docs/daily/2025-08-27.md`（本ファイル）

## 確認ポイント
- CIはDB無し運用（`SKIP_DB_TESTS=1`）のため、DB依存テストはskip
- ネットワーク依存（Wikidata）はテスト内でモック化

## 次のタスク候補
- Wikidata連携の信頼度設計と rate limit 対応
- `event_timeline` のフィルタ拡充（participant/loc など）
- 言語判定スクリプトの追加とランキング調整

